'use client';
import Link from 'next/link';
import React, { useState, useEffect } from 'react';
import Image from "next/image";

function Navbar() {
  const [isScrolled, setIsScrolled] = useState(false);
  const [theme, setTheme] = useState("light");
  const [menuOpen, setMenuOpen] = useState(false);
  const [activeNav, setActiveNav] = useState("");

  const navItems = [
    { name: "Blogs", href: "/Blogs" },
    { name: "BlogCreation", href: "/BlogCreation" },
    { name: "About", href: "/AboutUs" },
  ];


  useEffect(() => {
    const saved = localStorage.getItem("theme") || "light";
    setTheme(saved);
    applyTheme(saved);
  }, []);


  useEffect(() => {
    const handleScroll = () => {
      setIsScrolled(window.scrollY > 80);
    };
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);


  const applyTheme = (theme) => {
    const root = document.documentElement;
    if (theme === "dark") {
      root.classList.add("dark");
      root.classList.remove("light");
    } else {
      root.classList.add("light");
      root.classList.remove("dark");
    }
  };


  const toggleTheme = () => {
    const nextTheme = theme === "light" ? "dark" : "light";
    setTheme(nextTheme);
    localStorage.setItem("theme", nextTheme);
    applyTheme(nextTheme);
  };


  const handleMenuToggle = () => {
    setMenuOpen(!menuOpen);
    document.body.style.overflow = !menuOpen ? "hidden" : "auto";
  };


  const handleNavClick = (name) => {
    setActiveNav(name);
    setMenuOpen(false);
    document.body.style.overflow = "auto";
  };

  return (
    <nav className={`navbar ${isScrolled ? 'nav-shadow scrolled' : ''}`}>
      <div className="container">
        <div className="main-nav">
          <div className="logo-wrap">
            <Link href="/" className='logo'>
              <svg width="117" height="43" viewBox="0 0 83 32" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M22.9866 14.1587C22.5585 14.5895 22.2306 15.1093 22.0264 15.6811C21.8222 16.2531 21.7466 16.863 21.805 17.4674L21.7847 17.4471C21.8448 18.1586 21.7487 18.8746 21.5035 19.5453C21.2582 20.2158 20.8697 20.8248 20.3648 21.3297C19.8599 21.8346 19.2509 22.2233 18.5802 22.4684C17.9097 22.7137 17.1936 22.8097 16.4822 22.7496L16.5025 22.7699C15.6514 22.6907 14.7967 22.8759 14.0546 23.3003C13.3127 23.7247 12.7196 24.3675 12.3564 25.1413C11.9933 25.9151 11.8775 26.782 12.025 27.624C12.1726 28.466 12.5763 29.2419 13.1809 29.846C13.7856 30.4501 14.5619 30.8531 15.4039 30.9998C16.2461 31.1467 17.1128 31.0301 17.8863 30.6662C18.6598 30.3023 19.3021 29.7088 19.7258 28.9664C20.1495 28.224 20.334 27.3691 20.254 26.518L20.2755 26.5384C20.2154 25.8269 20.3113 25.1108 20.5565 24.4402C20.8018 23.7696 21.1905 23.1606 21.6953 22.6557C22.2002 22.1509 22.8092 21.7622 23.4798 21.517C24.1504 21.2718 24.8664 21.1758 25.578 21.2359L25.5565 21.2155C26.2517 21.278 26.9515 21.164 27.591 20.8841C28.2303 20.6042 28.7888 20.1674 29.2145 19.6142C29.6401 19.061 29.9193 18.4092 30.026 17.7194C30.1327 17.0296 30.0636 16.324 29.825 15.6679C29.5864 15.012 29.1861 14.4268 28.6612 13.9667C28.1362 13.5066 27.5036 13.1865 26.822 13.036C26.1404 12.8855 25.4318 12.9095 24.7619 13.1057C24.092 13.302 23.4826 13.6642 22.99 14.1587H22.9866Z"
                  fill="#262626" />
                <path
                  d="M14.6532 20.106L14.6317 20.0857C15.2364 20.1466 15.8471 20.0723 16.4197 19.8683C16.9922 19.6643 17.5122 19.3357 17.9422 18.9061C18.372 18.4765 18.7012 17.9567 18.9055 17.3843C19.11 16.8119 19.1847 16.2013 19.1242 15.5965L19.1457 15.6169C19.0856 14.9053 19.1816 14.1893 19.4267 13.5187C19.672 12.8481 20.0607 12.2392 20.5655 11.7342C21.0705 11.2294 21.6794 10.8407 22.35 10.5955C23.0207 10.3503 23.7366 10.2543 24.4482 10.3144L24.4267 10.294C25.2779 10.374 26.1329 10.1894 26.8753 9.76549C27.6178 9.34158 28.2113 8.69897 28.575 7.92532C28.9388 7.15168 29.055 6.28466 28.9079 5.44251C28.7609 4.60036 28.3576 3.8241 27.753 3.21959C27.1486 2.61509 26.3723 2.21177 25.5301 2.06467C24.688 1.91756 23.821 2.03381 23.0473 2.39757C22.2736 2.76132 21.6311 3.35488 21.2072 4.09729C20.7832 4.83968 20.5986 5.69478 20.6786 6.54593L20.6583 6.52447C20.7185 7.23601 20.6227 7.95213 20.3776 8.62281C20.1324 9.29349 19.7437 9.90258 19.2389 10.4076C18.7339 10.9124 18.1248 11.3011 17.4542 11.5462C16.7834 11.7914 16.0673 11.8872 15.3558 11.8269L15.3761 11.8484C14.7714 11.7875 14.1606 11.8617 13.5881 12.0658C13.0156 12.2697 12.4956 12.5984 12.0656 13.028C11.6357 13.4576 11.3066 13.9774 11.1022 14.5498C10.8978 15.1222 10.8231 15.7328 10.8836 16.3376L10.8632 16.3172C10.9231 17.0287 10.827 17.7446 10.5817 18.4152C10.3364 19.0856 9.94779 19.6946 9.44296 20.1994C8.93808 20.7043 8.32917 21.0929 7.65867 21.3382C6.98816 21.5834 6.27221 21.6796 5.56076 21.6197L5.5811 21.64C4.72994 21.5601 3.87485 21.7446 3.13244 22.1686C2.39005 22.5925 1.79649 23.2351 1.43273 24.0088C1.06897 24.7824 0.952709 25.6494 1.09982 26.4916C1.24693 27.3337 1.65026 28.11 2.25475 28.7145C2.85926 29.319 3.63552 29.7223 4.47767 29.8694C5.31982 30.0165 6.18685 29.9002 6.9605 29.5365C7.73414 29.1728 8.37675 28.5792 8.80065 27.8369C9.2246 27.0943 9.40919 26.2393 9.32921 25.3882L9.35067 25.4085C9.29057 24.6969 9.38659 23.981 9.63184 23.3103C9.87696 22.6398 10.2657 22.0308 10.7705 21.5258C11.2754 21.021 11.8844 20.6323 12.555 20.3872C13.2256 20.1419 13.9416 20.0459 14.6532 20.106Z"
                  fill="#262626" />
                <path
                  d="M7.08266 17.8388C7.51082 17.4082 7.83861 16.8884 8.04267 16.3164C8.24673 15.7445 8.322 15.1345 8.26313 14.5301L8.28458 14.5505C8.22448 13.8388 8.32046 13.1225 8.56582 12.4517C8.81119 11.781 9.20004 11.1719 9.70521 10.6669C10.2104 10.162 10.8196 9.77342 11.4905 9.52835C12.1614 9.28327 12.8777 9.18759 13.5893 9.248L13.5679 9.22767C14.4187 9.30738 15.2735 9.1227 16.0156 8.69882C16.7576 8.27495 17.3508 7.63249 17.7144 6.85909C18.0779 6.08568 18.194 5.21897 18.047 4.37714C17.8999 3.5353 17.4966 2.75934 16.8924 2.15505C16.2881 1.55077 15.5121 1.14758 14.6703 1.00048C13.8285 0.853371 12.9617 0.969519 12.1884 1.33306C11.4149 1.69659 10.7725 2.28984 10.3487 3.0319C9.9247 3.77395 9.74001 4.6287 9.81976 5.47955L9.79942 5.45922C9.85952 6.17072 9.7635 6.88676 9.51826 7.55735C9.27302 8.22794 8.88445 8.83694 8.37955 9.34184C7.87466 9.84674 7.26565 10.2354 6.59506 10.4805C5.92447 10.7258 5.20844 10.8218 4.49694 10.7617L4.51727 10.782C3.82207 10.7197 3.12236 10.8339 2.48302 11.1139C1.84367 11.394 1.28535 11.8309 0.859805 12.3842C0.434262 12.9374 0.155266 13.5892 0.0486519 14.2789C-0.0579512 14.9688 0.0112838 15.6743 0.249941 16.3302C0.488598 16.9862 0.888972 17.5712 1.41395 18.0312C1.93892 18.4913 2.57151 18.8113 3.25311 18.9618C3.93469 19.1122 4.64323 19.0881 5.31307 18.8919C5.98289 18.6955 6.59233 18.3334 7.08491 17.8388H7.08266Z"
                  fill="#262626" />
                <path
                  d="M43.2687 12.1667V14.7481H35.8445V12.1667H43.2687ZM37.5323 9.23235H40.9411V20.7052C40.9411 21.117 41.033 21.4222 41.2169 21.6208C41.4007 21.812 41.6949 21.9076 42.0994 21.9076C42.2318 21.9076 42.3788 21.8966 42.5406 21.8745C42.7024 21.8524 42.8422 21.8267 42.9598 21.7973L43.5004 24.3566C43.1253 24.4669 42.7613 24.5478 42.4083 24.5993C42.0626 24.6508 41.7206 24.6765 41.3823 24.6765C40.1541 24.6765 39.2054 24.3713 38.5362 23.7609C37.8669 23.1431 37.5323 22.2753 37.5323 21.1574V9.23235ZM44.758 24.5V12.1667H48.1667V24.5H44.758ZM46.4568 10.5892C45.9494 10.5892 45.5155 10.4201 45.1551 10.0818C44.7947 9.74348 44.6146 9.33531 44.6146 8.85728C44.6146 8.37924 44.7947 7.97475 45.1551 7.64381C45.5155 7.30551 45.9494 7.13636 46.4568 7.13636C46.9716 7.13636 47.4092 7.30551 47.7696 7.64381C48.1299 7.97475 48.3101 8.37924 48.3101 8.85728C48.3101 9.33531 48.1299 9.74348 47.7696 10.0818C47.4092 10.4201 46.9716 10.5892 46.4568 10.5892ZM53.6935 24.7317C52.914 24.7317 52.2116 24.5956 51.5865 24.3235C50.9687 24.044 50.4833 23.6322 50.1303 23.088C49.7773 22.5437 49.6008 21.8671 49.6008 21.0582C49.6008 20.3668 49.7258 19.7932 49.9759 19.3372C50.2259 18.8739 50.5679 18.4988 51.0018 18.212C51.4357 17.9252 51.9285 17.7082 52.4801 17.5612C53.0316 17.4141 53.6163 17.3111 54.2341 17.2523C54.9474 17.1861 55.5211 17.1199 55.955 17.0537C56.3889 16.9875 56.7051 16.8882 56.9037 16.7559C57.1096 16.6161 57.2126 16.4176 57.2126 16.1602V16.105C57.2126 15.5975 57.0508 15.2041 56.7272 14.9246C56.411 14.6452 55.9623 14.5054 55.3813 14.5054C54.7709 14.5054 54.2819 14.6415 53.9142 14.9136C53.5538 15.1783 53.3148 15.5166 53.1971 15.9285L50.0311 15.6748C50.1928 14.9246 50.5091 14.2774 50.9798 13.7332C51.4504 13.1816 52.0572 12.7588 52.8 12.4646C53.5501 12.1631 54.4179 12.0123 55.4034 12.0123C56.0874 12.0123 56.7419 12.0932 57.367 12.255C57.9921 12.4168 58.5474 12.6668 59.0328 13.0051C59.5255 13.3361 59.9153 13.7663 60.2021 14.2958C60.4889 14.8253 60.6324 15.4541 60.6324 16.1822V24.5H57.3781V22.7791H57.2898C57.0912 23.1689 56.8265 23.5108 56.4955 23.805C56.1646 24.0918 55.7675 24.3198 55.3041 24.489C54.8408 24.6508 54.3039 24.7317 53.6935 24.7317ZM54.6753 22.3709C55.1754 22.3709 55.6167 22.2716 55.9991 22.0731C56.3889 21.8671 56.6904 21.595 56.9037 21.2567C57.1243 20.9111 57.2346 20.525 57.2346 20.0984V18.7857C57.1317 18.8519 56.9846 18.9144 56.7934 18.9732C56.6095 19.032 56.4036 19.0835 56.1756 19.1276C55.9476 19.1718 55.7196 19.2122 55.4917 19.249C55.2637 19.2784 55.0578 19.3078 54.8739 19.3372C54.4694 19.3961 54.1164 19.4917 53.8149 19.6241C53.5133 19.7491 53.278 19.9219 53.1088 20.1425C52.9471 20.3558 52.8662 20.6243 52.8662 20.9478C52.8662 21.4112 53.0353 21.7642 53.3736 22.0069C53.7119 22.2496 54.1458 22.3709 54.6753 22.3709ZM66.0378 17.3736V24.5H62.6291V12.1667H65.9827V14.362H66.104C66.3835 13.6339 66.8284 13.0603 67.4388 12.6411C68.0492 12.2219 68.8141 12.0123 69.7334 12.0123C70.5865 12.0123 71.3293 12.1998 71.9618 12.5749C72.6016 12.95 73.098 13.4832 73.451 14.1745C73.804 14.8658 73.9805 15.6932 73.9805 16.6566V24.5H70.5718V17.2633C70.5718 16.5132 70.3769 15.9248 69.9871 15.4983C69.5973 15.0644 69.0605 14.8474 68.3765 14.8474C67.9205 14.8474 67.516 14.9504 67.163 15.1563C66.81 15.3549 66.5342 15.6417 66.3357 16.0167C66.1371 16.3918 66.0378 16.8441 66.0378 17.3736Z"
                  fill="#262626" />
              </svg>
            </Link>
          </div>


          <div className={`nav-links xinder-links ${menuOpen ? "active" : ""}`}>
            <ul>
              {navItems.map(item => (
                <li key={item.name} className={`nav-item ${activeNav === item.name ? "active" : ""}`}>
                  <Link href={item.href} className="nav-link" onClick={() => handleNavClick(item.name)}>
                    {item.name}
                  </Link>
                </li>
              ))}

              <li>
                <button
                  onClick={toggleTheme}
                  className="theme-toggle-btn"
                  style={{
                    padding: "6px 12px",
                    borderRadius: "8px",
                    background: "transparent",
                    border: "1px solid var(--foreground)",
                    cursor: "pointer"
                  }}
                >
                  {theme === "light" ? "ðŸŒ™" : "ðŸŒž"}
                </button>
              </li>
            </ul>
          </div>


          <div className={`ham-menu ${menuOpen ? "active" : ""}`} onClick={handleMenuToggle}>
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
      </div>
    </nav>
  );
}

export default Navbar;
